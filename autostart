#!/bin/bash

# Pr端fen, ob das Paket 'zip' installiert ist, andernfalls installieren
if ! command -v zip &> /dev/null; then
    echo "'zip' Paket nicht gefunden. Es wird nun installiert..."
    sudo apt-get update
    sudo apt-get install -y zip
fi

# Benutzer "chat" erstellen
sudo useradd -m chat

# Passwort f端r den Benutzer "chat" festlegen
echo "chat:chat" | sudo chpasswd

# Automatische Anmeldung f端r den Benutzer "chat" einrichten
sudo su - chat -c 'echo "chat:chat" | sudo tee /etc/init/tty1.conf'

# AutoGPT starten nach dem Systemstart
autogpt_path=$(which autogpt.py)
echo 'if [ -f "$HOME/.bashrc" ]; then' | sudo tee -a /home/chat/.bashrc
echo '    source /path/to/autogpt/autogpt-env/bin/activate' | sudo tee -a /home/chat/.bashrc
echo "    python $autogpt_path --input_text 'I want to generate text based on this prompt.'" | sudo tee -a /home/chat/.bashrc
echo 'fi' | sudo tee -a /home/chat/.bashrc

echo "Die Konfiguration f端r den Benutzer 'chat' und den Auto-Start wurde abgeschlossen."
